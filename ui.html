<style>
  * {
    margin: 0;
    padding: 0;
    font-family: "Inter", sans-serif;
  }

  .figma-light body {
    color: #333333;
  }

  .figma-dark body {
    color: #ffffff;
  }

  .container {
    margin: 15px;
  }

  .ms-1 {
    margin-left: 0.5rem;
  }

  .me-1 {
    margin-right: 0.5rem;
  }

  .mt-1 {
    margin-top: 1rem;
  }

  .mb-1 {
    margin-bottom: 1rem;
  }

  h4,
  h5 {
    margin-bottom: 0.5rem;
  }

  a {
    color: #00b763;
    text-decoration: none;
  }

  hr {
    margin-top: 1rem;
    margin-bottom: 1rem;
    border-color: #009b4e;
  }

  .d-flex {
    display: flex;
  }
  .flex-row {
    flex-direction: row;
  }
  .flex-column {
    flex-direction: column;
  }

  #outputPreview {
    font-family: "Roboto Mono", monospace;
    font-size: 0.8rem;
    color: #aaaaaa;
    min-height: 85px;
    max-height: 130px;
    overflow: scroll;
  }

  footer a {
    font-size: 0.8rem;
  }

  .arrow::after {
    content: " ";
    display: inline-block;
    background-image: url("https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/arrow.svg");
    width: 15px;
    height: 15px;
    margin-left: -5px;
    opacity: 0;
    transition: all 0.2s;
    vertical-align: sub;
  }

  .arrow:hover::after {
    opacity: 1;
    transform: translate(10px, 0px);
    transition: all 0.2s;
    vertical-align: sub;
  }

  .btn {
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    line-height: 1.5;
    border-radius: 0.25rem;
    border: 1px solid transparent;
    cursor: pointer;
  }

  .btn-primary {
    background-color: #00b763;
    border-color: #00b763;
    color: #ffffff;
  }

  .btn-primary:hover {
    background-color: #009b4e;
    border-color: #009b4e;
    color: #ffffff;
  }

  .btn-primary:focus {
    background-color: #008d47;
    border-color: #008d47;
    color: #ffffff;
    box-shadow: 0 0 0 0.2rem rgb(0 183 99 / 50%);
  }

  .figma-light .btn-primary:disabled,
  .btn-primary[disabled] {
    background-color: #c0d0c9;
    border-color: #c0d0c9;
    color: #5f7665;
    cursor: default;
  }

  .figma-dark .btn-primary:disabled,
  .btn-primary[disabled] {
    background-color: #2c463a;
    border-color: #2c463a;
    color: #5f7665;
    cursor: default;
  }

  .btn-radio:checked + .btn {
    background-color: #444444;
    border-color: #444444;
  }

  input[type="radio"] {
    opacity: 0;
    margin: 0;
    height: 1px;
    width: 1px;
  }

  input[type="radio"] {
    box-sizing: border-box;
    padding: 0;
  }

  .btn-block {
    width: 100%;
  }

  .form-control {
    display: block;
    width: 100%;
    height: calc(1.5em + 0.75rem + 2px);
    padding: 0.375rem 0rem;
    font-size: 0.85rem;
    font-weight: 400;
    line-height: 1.5;
    background-clip: padding-box;
    border: none;
  }

  .figma-light .form-control {
    color: #495057;
    background-color: #ffffff;
    border-bottom: 1px solid #e5e5e5;
  }

  .figma-dark .form-control {
    color: #ffffff;
    background-color: #2c2c2c;
    border-bottom: 1px solid #444444;
  }

  .form-control:focus {
    outline: 0;
  }

  .figma-light .form-control:focus {
    color: #495057;
    background-color: #ffffff;
    border-color: #00b763;
  }

  .figma-dark .form-control:focus {
    color: #ffffff;
    background-color: #2c2c2c;
    border-color: #00b763;
  }

  label {
    display: inline-block;
    font-size: 0.8rem;
    margin-bottom: 0.5rem;
  }

  .layout-options {
    display: flex;
    justify-content: space-between;
  }

  .footer-section {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding-left: 15px;
    padding-right: 15px;
  }

  .footer-version {
    display: flex;
    justify-content: end;
    padding-bottom: 0;
  }
  .footer-version p {
    color: #495057;
    font-size: 12px;
  }

  .form-group {
    margin-bottom: 1rem;
  }

  .btn-group {
    display: inline-flex;
    flex-direction: row;
    justify-content: space-between;
    border-radius: 0.25rem;
  }

  .figma-light .btn-group {
    background-color: #e5e5e5;
  }

  .figma-dark .btn-group {
    background-color: #2c2c2c;
  }

  .btn-group label {
    margin: 0;
  }

  .btn-group-item {
    width: 100%;
    text-align: center;
  }

  footer {
    width: 100%;
    position: fixed;
    bottom: 0;
    left: 0;
  }

  .input-group {
    position: relative;
    display: flex;
    flex-wrap: nowrap;
    align-items: stretch;
    width: 100%;
    margin-bottom: 1rem;
  }

  .input-group-prepend {
    display: flex;
    margin-right: -1px;
  }

  .input-group-text {
    display: flex;
    align-items: center;
    padding: 0.375rem 0.375rem;
    margin-bottom: 0;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    text-align: center;
    background-color: #ffffff;
    white-space: nowrap;
    border-radius: 0.25rem;
  }

  .figma-light .input-group-text {
    background-color: #ffffff;
  }

  .figma-dark .input-group-text {
    background-color: #2c2c2c;
  }

  .input-group > .input-group-prepend > .input-group-text {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  .input-group > .form-control {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  .form-helper {
    margin-top: 0.5rem;
    font-size: 0.8rem;
    color: #6c757d;
    line-height: 1.4;
  }

  .figma-dark .card {
    padding: 12px;
    border-radius: 12px;
    background-color: #43494e;
    border: 1px solid #50585e;
  }
  .figma-light .card {
    padding: 12px;
    border-radius: 12px;
    background-color: #dce2e7;
    border: 1px solid #c3d5e2;
  }

  .figma-dark .card h2 {
    margin-bottom: 0.25rem;
    color: #ffffff;
  }
  .figma-light .card h2 {
    margin-bottom: 0.25rem;
    color: #333333;
  }

  .figma-dark .card p {
    color: #ffffff;
  }
  .figma-light .card p {
    color: #333333;
  }
  .vertical-align-bottom {
    vertical-align: bottom;
  }

  .mini-banner {
    height: 4px;
    background-color: #00b763;
    width: 100%;
  }
</style>
<div class="mini-banner"></div>
<div class="container">
  <h5>Dataset</h5>
  <div class="form-group">
    <select name="" id="datasetSelector" class="form-control" onchange="datasetController(this)">
      <option value="null" selected disabled>Select dataset</option>
      <option value="names" data-url="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/datasets/first-names.json">First name</option>
      <option value="surnames" data-url="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/datasets/last-names.json">Last name</option>
      <option value="fullnames" data-url="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/datasets/full-names.json">Full name</option>
      <option value="usernames" data-url="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/datasets/usernames.json">Username</option>
      <option value="emails" data-url="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/datasets/emails.json">Email</option>
      <option value="companies" data-url="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/datasets/companies.json">Companies</option>
      <option value="phones">Phone number</option>
      <option value="dates">Date</option>
      <option value="times">Time</option>
      <option value="numbers">Number range</option>
      <option value="money">Money</option>
      <option value="licenseplates">License plates (EU)</option>
      <option value="creditcards">Credit card</option>
      <option value="ethereum">Ethereum Address</option>
      <option value="custom">Custom</option>
    </select>
    <div id="formHelper" class="form-helper">
      <p class="mb-1">Select a dataset to get started.<br />Each dataset has different options that you can customise to your liking.</p>
      <div class="card">
        <h2>‚ú® What's new in v15.0</h2>
        <p>
          This version adds a new generative dataset for company names and some bug fixes.<br />
          Select "Companies" from the available datasets and a random company name will be generated. üè¨
        </p>
        <a href="https://www.loom.com/share/af90c8ef179842fdb8ed1a662e280fb2?sid=f6ebf442-6de8-47dc-8634-38aeceebdfea" target="_blank" class="btn btn-primary mt-1">
          <img class="vertical-align-bottom" src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/video.svg" width="24" height="24" alt="" />
          How to use Mockreate
        </a>
      </div>
    </div>
  </div>
  <!-- FIRST NAMES -->
  <section id="section-names" style="display: none">
    <h5>Gender</h5>
    <div class="form-group">
      <select id="genderSelection" class="form-control" name="" onchange="generate();">
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="both" selected>Both</option>
      </select>
    </div>
  </section>
  <!-- LAST NAMES -->
  <section id="section-surnames" style="display: none"></section>

  <!-- FULL NAMES -->
  <section id="section-fullnames" style="display: none"></section>

  <!--  USERNAMES -->
  <section id="section-usernames" style="display: none"></section>

  <!--  EMAILS -->
  <section id="section-emails" style="display: none"></section>

  <!--  COMPANIES -->
  <section id="section-companies" style="display: none"></section>

  <!--  PHONE NUMBERS -->
  <section id="section-phones" style="display: none">
    <div class="layout-options flex-column">
      <h5>Phone prefix</h5>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/plus.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="phonePrefix" type="number" value="44" placeholder="Phone prefix e.g.41" />
      </div>

      <h5>Format</h5>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/phone-number.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <select name="phone" id="phoneFormat" class="form-control" onchange="checkFormatSelected(this)">
          <option value="null" selected disabled>Select format</option>
          <option value="custom">Custom</option>
          <option value="04xx xxx xxx">Australia</option>
          <option value="13x xxxx xxxx">China</option>
          <option value="0x xx xx xx xx">France</option>
          <option value="xxxx xxxxxx">India</option>
          <option value="xxx xxxxxxx">Italy</option>
          <option value="6xx xxx xxx">Spain</option>
          <option value="xxxx xxxxxx">United Kingdom</option>
          <option value="212 xxx xxx">United States</option>
        </select>
      </div>

      <div class="input-group">
        <input class="form-control" id="phoneDigits" type="hidden" value="xx-xxxx-xxx" placeholder="e.g. xx-xxxx-xxx" hidden />
      </div>
    </div>
  </section>

  <!--  DATES -->
  <section id="section-dates" style="display: none">
    <div class="layout-options flex-column">
      <h5>Year</h5>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/calendar.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="selectedYear" type="number" min="1900" max="2099" step="1" value="2023" onchange="generate()" />
      </div>

      <h5>Date format</h5>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/format-slash.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <select class="form-control" id="dateFormat" onchange="generate()">
          <option value="0" disabled>Date format</option>
          <option value="1" selected>26/08/1988</option>
          <option value="2">26-08-1988</option>
          <option value="3">26 08 1988</option>
          <option value="4">26 Aug 1988</option>
        </select>
      </div>
    </div>
  </section>

  <!--  TIME -->
  <section id="section-times" style="display: none">
    <div class="layout-options flex-column">
      <h5>Time format</h5>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/clock.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <select class="form-control" id="timeFormat" onchange="generate()">
          <option value="0" disabled>Select time format</option>
          <option value="1" selected>24h - hh:mm - 15:30</option>
          <option value="2">12h - h:mm am/pm - 4:30pm</option>
        </select>
      </div>
    </div>
  </section>

  <!-- NUMBERS -->
  <section id="section-numbers" style="display: none">
    <div class="layout-options">
      <div class="input-group me-1">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/to-right.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="numberFrom" type="number" min="0" value="0" onchange="generate()" />
      </div>

      <div class="input-group ms-1">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/to-left.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="numberTo" type="number" min="0" value="50" onchange="generate()" />
      </div>
    </div>
  </section>

  <!-- MONEY -->
  <section id="section-money" style="display: none">
    <div class="layout-options">
      <div class="input-group me-1">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/to-right.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="moneyFrom" type="number" min="0" value="0" onchange="generate()" />
      </div>

      <div class="input-group ms-1">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/to-left.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="moneyTo" type="number" min="0" value="50" onchange="generate()" />
      </div>

      <div class="input-group ms-1">
        <div class="input-group-prepend">
          <span class="input-group-text">
            <img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/coin-currency.svg" width="20" height="20" alt="" />
          </span>
        </div>
        <input class="form-control" id="moneyCurrency" type="text" value="$" onchange="generate()" />
      </div>
    </div>
    <div class="form-group">
      <h5>Symbol position</h5>
      <label for="symbol-prepend">
        <input class="btn-radio" type="radio" id="symbol-prepend" name="symbol-position" value="prepend" checked onchange="generate()" />
        <img class="btn" src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/prepend.svg" alt="" width="20" height="20" />
      </label>
      <label for="symbol-append">
        <input class="btn-radio" type="radio" id="symbol-append" name="symbol-position" value="append" onchange="generate()" />
        <img class="btn" src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/append.svg" alt="" width="20" height="20" />
      </label>
    </div>
  </section>

  <!--  LICENSE PLATES -->
  <section id="section-licenseplates" style="display: none"></section>

  <!--  CREDIT CARDS -->
  <section id="section-creditcards" style="display: none"></section>

  <!-- ETHEREUM ADDRESS -->
  <section id="section-ethereum" style="display: none"></section>

  <!--  CUSTOM  -->
  <section id="section-custom" style="display: none">
    <div class="form-group">
      <h5>Custom dataset</h5>
      <input class="form-control" id="customDataset" type="url" placeholder="Link to your JSON dataset" onchange="generate();" />
    </div>

    <div class="form-group">
      <h5>Key</h5>
      <input class="form-control" id="customDatasetKey" type="text" placeholder="e.g. names" onchange="generate();" />
    </div>
  </section>

  <div id="options" style="display: none">
    <button id="create" class="btn btn-primary btn-block mt-1" disabled>Generate</button>
  </div>

  <footer>
    <div class="footer-section">
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSddC4rEmdPbmHlw156Gy2J5l98Nyxee_4GRoMSFdMc60WjqHQ/viewform" class="arrow" target="_blank"><img src="https://raw.githubusercontent.com/monzanifabio/figma-mockreate/main/img/feedback.svg" alt="" width="18" height="18" style="vertical-align: bottom" /> Feedback?</a>
      <a href="https://www.buymeacoffee.com/monzanifabio" class="arrow" target="_blank">Buy me a coffee</a>
    </div>
    <div class="footer-version">
      <p>v15</p>
    </div>
  </footer>
</div>
<script>
  const btnCreate = document.getElementById("create");
  const outputPreview = document.getElementById("outputPreview");

  // Get every numeric input and prevent to ever be 0
  const numInputs = document.querySelectorAll("input[type=number]");

  numInputs.forEach(function (input) {
    input.addEventListener("change", function (e) {
      if (e.target.value == "") {
        e.target.value = 0;
      }
    });
  });

  function checkFormatSelected(el) {
    if (el.value == "custom") {
      document.getElementById("phoneDigits").type = "text";
    } else {
      document.getElementById("phoneDigits").type = "hidden";
    }
  }

  function datasetController(el) {
    //Layout options startup
    if (el.value !== "null") {
      let options = document.getElementById("options");
      options.style.display = "block";
      let helper = document.getElementById("formHelper");
      helper.style.display = "none";
    }

    //Display names section if names is selected
    if (el.value == "names") {
      let section = document.getElementById("section-names");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }
    //Display surnames section if surname is selected
    if (el.value == "surnames") {
      let section = document.getElementById("section-surnames");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }
    //Display full names section if full names is selected
    if (el.value == "fullnames") {
      let section = document.getElementById("section-fullnames");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }
    //Display  usernames section if usernames is selected
    if (el.value == "usernames") {
      let section = document.getElementById("section-usernames");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }
    //Display  emails section if emails is selected
    if (el.value == "emails") {
      let section = document.getElementById("section-emails");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display companies section if companies is selected
    if (el.value == "companies") {
      let section = document.getElementById("section-companies");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display  phone numbers section if phone numbers is selected
    if (el.value == "phones") {
      let section = document.getElementById("section-phones");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display dates section if dates is selected
    if (el.value == "dates") {
      let section = document.getElementById("section-dates");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display times section if times is selected
    if (el.value == "times") {
      let section = document.getElementById("section-times");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display numbers section if numbers is selected
    if (el.value == "numbers") {
      let section = document.getElementById("section-numbers");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display money section if money is selected
    if (el.value == "money") {
      let section = document.getElementById("section-money");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display license plates section if credit cards is selected
    if (el.value == "licenseplates") {
      let section = document.getElementById("section-licenseplates");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display credit cards section if credit cards is selected
    if (el.value == "creditcards") {
      let section = document.getElementById("section-creditcards");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display ethereum address section if credit cards is selected
    if (el.value == "ethereum") {
      let section = document.getElementById("section-ethereum");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }

    //Display custom section if custom is selected
    if (el.value == "custom") {
      let section = document.getElementById("section-custom");
      if (section.style.display == "none") {
        let sections = document.getElementsByTagName("section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].style.display = "none";
        }
        section.style.display = "block";
      } else {
        section.style.display = "none";
      }
    }
  }
  //Define array to store the generated results
  let genStorage = [];
  let count = 0;
  let genderSelection;

  // Get the state of the selection
  onmessage = (event) => {
    count = event.data.pluginMessage.type;
    selection = event.data.pluginMessage.selected;
    console.log(selection);
    if (selection == true) {
      btnCreate.removeAttribute("disabled");
    } else {
      btnCreate.setAttribute("disabled", "");
    }
  };

  ////////////////////////////////////////////////////////////////////////////////////
  // GENERATE
  ////////////////////////////////////////////////////////////////////////////////////

  async function generate() {
    //Empty the array on a new generation
    genStorage.length = 0;
    genderSelection = document.getElementById("genderSelection").value;
    const dataSelection = document.getElementById("datasetSelector").value;

    if (dataSelection == "names") {
      const requestURL = document.getElementById("datasetSelector").options[datasetSelector.selectedIndex].getAttribute("data-url");

      const request = new Request(requestURL);

      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        if (genderSelection === "both") {
          genStorage.push(items[x].name);
        } else if (items[x].gender === genderSelection) {
          genStorage.push(items[x].name);
        } else {
          genStorage.push(items[x].name);
        }
      }
    }

    if (dataSelection == "surnames") {
      const requestURL = document.getElementById("datasetSelector").options[datasetSelector.selectedIndex].getAttribute("data-url");

      const request = new Request(requestURL);

      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        genStorage.push(items[x]);
      }
    }

    if (dataSelection == "fullnames") {
      const requestURL = document.getElementById("datasetSelector").options[datasetSelector.selectedIndex].getAttribute("data-url");
      const request = new Request(requestURL);
      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        genStorage.push(items[x].full_name);
      }
    }

    if (dataSelection == "usernames") {
      const requestURL = document.getElementById("datasetSelector").options[datasetSelector.selectedIndex].getAttribute("data-url");
      const request = new Request(requestURL);
      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        genStorage.push(items[x].username);
      }
    }

    if (dataSelection == "emails") {
      const requestURL = document.getElementById("datasetSelector").options[datasetSelector.selectedIndex].getAttribute("data-url");
      const request = new Request(requestURL);
      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        genStorage.push(items[x].email);
      }
    }

    if (dataSelection == "companies") {
      const requestURL = document.getElementById("datasetSelector").options[datasetSelector.selectedIndex].getAttribute("data-url");
      const request = new Request(requestURL);
      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        genStorage.push(items[x].company);
      }
    }

    let phonePrefix = document.getElementById("phonePrefix").value;
    let phoneDigits = document.getElementById("phoneDigits").value;
    let phoneFormat = document.getElementById("phoneFormat").value;

    function generateRandomPattern(pattern) {
      let result = "";

      for (let i = 0; i < pattern.length; i++) {
        if (pattern[i] === "x") {
          const digit = Math.floor(Math.random() * 10);
          result += digit;
        } else {
          result += pattern[i];
        }
      }

      return result;
    }

    if (dataSelection == "phones" && phonePrefix !== "") {
      if (phoneDigits == "") {
        genStorage.push("Invalid format");
      }
      if (phoneFormat == "null") {
        genStorage.push("Invalid format");
      }

      if (phoneFormat == "custom" && phoneDigits !== "") {
        for (var i = 0; i < count; i++) {
          x = generateRandomPattern(phoneDigits);
          genStorage.push("+" + phonePrefix + " " + x);
        }
      }

      if (phoneFormat !== "null" && phoneFormat !== "custom") {
        for (var i = 0; i < count; i++) {
          x = generateRandomPattern(phoneFormat);
          genStorage.push("+" + phonePrefix + " " + x);
        }
      }
    }

    let selectedYear = document.getElementById("selectedYear").value;
    let dateFormat = document.getElementById("dateFormat").value;

    if (dataSelection == "dates" && selectedYear !== "" && dateFormat != 0) {
      for (var i = 0; i < count; i++) {
        d = (Math.floor(Math.random() * (31 - 1 + 1)) + 1).toString();
        m = (Math.floor(Math.random() * (12 - 1 + 1)) + 1).toString();
        let separator = ["_", "/", "-", " ", " "];
        let mm = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        if (dateFormat == 1) {
          genStorage.push(d + "/" + m + "/" + selectedYear);
        }
        if (dateFormat == 2) {
          genStorage.push(d + "-" + m + "-" + selectedYear);
        }
        if (dateFormat == 3) {
          genStorage.push(d + " " + m + " " + selectedYear);
        }
        if (dateFormat == 4) {
          genStorage.push(d + " " + mm[m] + " " + selectedYear);
        }
      }
    }

    let timeFormat = document.getElementById("timeFormat").value;

    if (dataSelection == "times" && timeFormat != 0) {
      for (var i = 0; i < count; i++) {
        hh = (Math.floor(Math.random() * (23 - 1 + 1)) + 1).toString();
        h = (Math.floor(Math.random() * (12 - 1 + 1)) + 1).toString();
        m = (Math.floor(Math.random() * (60 - 1 + 1)) + 1).toString();
        if (hh < 10) {
          hh = "0" + hh;
        }
        if (m < 10) {
          m = "0" + m;
        }
        let time = ["am", "pm"];
        x = Math.floor(Math.random() * time.length);
        if (timeFormat == 1) {
          genStorage.push(hh + ":" + m);
        }
        if (timeFormat == 2) {
          genStorage.push(h + ":" + m + time[x]);
        }
      }
    }

    let numberFrom = parseInt(document.getElementById("numberFrom").value);
    let numberTo = parseInt(document.getElementById("numberTo").value);

    if (dataSelection == "numbers" && numberFrom !== "" && numberTo !== "") {
      for (var i = 0; i < count; i++) {
        x = (Math.floor(Math.random() * (numberTo - numberFrom + 1)) + numberFrom).toString();
        genStorage.push(x);
      }
    }

    let moneyFrom = parseInt(document.getElementById("moneyFrom").value);
    let moneyTo = parseInt(document.getElementById("moneyTo").value);
    let currency = document.getElementById("moneyCurrency").value;

    if (dataSelection == "money" && moneyFrom !== "" && moneyTo !== "") {
      if (document.getElementById("symbol-prepend").checked) {
        console.log("prepend");
        for (var i = 0; i < count; i++) {
          x = currency + (Math.random() * (moneyTo - moneyFrom + 1) + moneyFrom).toFixed(2).toString();
          genStorage.push(x);
        }
      } else if (document.getElementById("symbol-append").checked) {
        console.log("append");
        for (var i = 0; i < count; i++) {
          x = (Math.random() * (moneyTo - moneyFrom + 1) + moneyFrom).toFixed(2).toString() + currency;
          genStorage.push(x);
        }
      }
    }

    if (dataSelection == "licenseplates") {
      // btnCreate.removeAttribute("disabled");
      for (var i = 0; i < count; i++) {
        a = Math.random()
          .toString(36)
          .replace(/[^a-z]+/g, "")
          .substr(0, 2)
          .toUpperCase();
        b = (Math.floor(Math.random() * (999 - 123 + 1)) + 123).toString();
        c = Math.random()
          .toString(36)
          .replace(/[^a-z]+/g, "")
          .substr(0, 2)
          .toUpperCase();

        genStorage.push(a + " " + b + " " + c);
      }
    }

    if (dataSelection == "ethereum") {
      let address = "";
      let hexChar = "0123456789abcdefABCDEF";
      for (var i = 0; i < count; i++) {
        for (var a = 0; a < 40; a++) {
          address += hexChar.charAt(Math.floor(Math.random() * hexChar.length));
        }
        genStorage.push("0x" + address);
        address = "";
      }
    }

    if (dataSelection == "creditcards") {
      for (var i = 0; i < count; i++) {
        x = (Math.floor(Math.random() * (9999999999999999 - 1234567890123456 + 1)) + 1234567890123456).toString().replace(/\d{4}(?=.)/g, "$& ");
        genStorage.push(x);
      }
    }

    const customDataset = document.getElementById("customDataset");
    const customDatasetKey = document.getElementById("customDatasetKey").value.toString();

    if (dataSelection == "custom" && customDataset != "" && customDatasetKey != "") {
      const requestURL = document.getElementById("customDataset").value;
      const request = new Request(requestURL);
      const response = await fetch(request);
      const items = await response.json();

      for (var i = 0; i < count; i++) {
        x = Math.floor(Math.random() * items.length);
        genStorage.push(items[x][customDatasetKey]);
      }
    }
  }

  btnCreate.onclick = async () => {
    await generate();

    parent.postMessage(
      {
        pluginMessage: {
          type: "create-random-text",
          genStorage,
        },
      },
      "*"
    );
  };
</script>
